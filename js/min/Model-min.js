var Model={geoData:null,crimeData:null,minDate:null,maxDate:null,startdate:null,enddate:null,initData:function(a,o,e){Model.geoData=null,Model.crimeData=null,Model.startdate=o,Model.enddate=e;var l=function(){null!=Model.geoData&&null!=Model.crimeData&&a.call(window,Model.geoData,Model.crimeData)};Model.loadCrimeData(o,e,function(a){Model.crimeData=a,l()}),Model.loadGeoData(function(a){Model.geoData=a,l()})},loadCrimeData:function(a,o,e){console.log("loading crime data");var l=d3.time.format("%Y-%m-%d"),t=l(a),n=l(o);console.log(t),console.log(n),sodaurl="https://data.seattle.gov/resource/3k2p-39jp.json?$where=within_circle(incident_location,47.59514,-122.3320313,1609.34) AND (event_clearance_date >= '"+t+"' AND event_clearance_date < '"+n+"')&$limit=10000",console.log(sodaurl),$.ajax({type:"GET",url:sodaurl,dataType:"json",error:Model.dataLoadError,success:e})},loadGeoData:function(a){console.log("loading geo data"),$.ajax({type:"GET",url:"geojson/seattle.topojson",dataType:"json",error:Model.dataLoadError,success:a})},dataLoadError:function(a,o,e){console.log(a,o,e),alert("Could not load data from file.")}};